---
title: "WSL2μ—μ„ μ‚Όλ°”(Samba) μ„λ²„ μ‚¬μ©ν•κΈ°"
category: [Windows]
toc: true
toc_label: "μ΄ νμ΄μ§€ λ©μ°¨"
---

WSL2μ—μ„ μ‚Όλ°”(Samba) μ„λ²„λ¥Ό κµ¬μ¶•ν•κ³  κ³ μ • IPλ΅ μ‚Όλ°”λ¥Ό μ΄μ©ν•λ” λ°©λ²•μ„ μ •λ¦¬ν•΄ λ³Έλ‹¤.

## λ™κΈ°
ν„μ¬ <font color=blue>Windows11</font>μ€ νƒμƒ‰κΈ°μ—μ„ WSL2 λ””λ ‰ν„°λ¦¬μ™€ νμΌμ— λ€ν• μ•΅μ„Έμ¤ μ†λ„κ°€ μ•„μ£Ό λΉ¨λΌμ„ λ¬Έμ κ°€ μ—†μ§€λ§, <mark style='background-color: #ffdce0'>Windows10</mark>μ κ²½μ°μ—λ” μ•΅μ„Έμ¤ μ†λ„κ°€ μƒλ‹Ήν λλ¦° λ¬Έμ μ μ΄ μλ”λ°, μ΄μ— λ€ν• λ€μ‘μ±…μΌλ΅ `μ‚Όλ°”(Samba)`λ¥Ό μ΄μ©ν•  μ μλ‹¤.

<br>
κ·Έλ°λ° μ΄ μ‚Όλ°”λ¥Ό μ΄μ©ν•λ” λ°©μ‹μ—λ” ν• κ°€μ§€ λ¬Έμ μ μ΄ μλ”λ°, κ·Έκ²ƒμ€ WSL2 VMμ΄ μ¬μ‹μ‘ν•  λ•λ§λ‹¤ WSL2μ IP μ£Όμ†κ°€ λ°”λ€λ‹¤λ” κ²ƒμ΄λ‹¤. λ”°λΌμ„ WSL2 μ‚Όλ°” μ„λ²„ μ£Όμ†λ¥Ό κ³ μ •μ‹ν‚¬ μ μ—†λ” λ¶νΈν•¨μ΄ μλ‹¤. μ΄ λ¬Έμ λ¥Ό κµ¬κΈ€λ§ ν•΄λ³΄λ‹, ν¬νΈ ν¬μ›λ”©μ„ μ΄μ©ν•λ” λ°©λ²•μΌλ΅ νν”Όν•  μ μμ—κ³ , μ΄λ² κΈ€μ—μ„ μ „μ²΄ λ°©λ²•μ„ μ •λ¦¬ν•΄ λ³Έλ‹¤.

## μ‚Όλ°” μ„λ²„ μ„¤μΉ
1. WSL2μ—μ„ μ•„λμ™€ κ°™μ΄ μ‚Όλ°” μ„λ²„λ¥Ό μ„¤μΉν•λ‹¤.
   ```shell
   $ sudo apt install samba
   ```
1. /etc/samba/smb.conf νμΌμ— μ•„λ μμ™€ κ°™μ΄ μ‚¬μ©μλ¥Ό μ¶”κ°€ν•λ‹¤. (μ•„λμ—μ„ **user_name** λ¶€λ¶„μ„ μ‹¤μ  μ‚¬μ©μ μ΄λ¦„μΌλ΅ λ€μ²΄ν•λ©΄ λ¨)
   ```ini
   [user_name]
       comment = user_name home directory
       path = /home/user_name
       writeable = yes
       browseable = yes
       valid users = user_name
       create mask = 644
       directory mask = 755
   ```
1. μ•„λμ™€ κ°™μ΄ μ‚Όλ°” μ‚¬μ©μλ¥Ό μ¶”κ°€ν•κ³  μ‚Όλ°” μ ‘μ† μ•”νΈλ¥Ό μ„¤μ •ν•λ‹¤.
   ```shell
   $ sudo smbpasswd -a $USER
   ```
1. μ•„λμ™€ κ°™μ΄ μ‚Όλ°” μ„λ²„λ¥Ό μ¬μ‹μ‘ μ‹ν‚¨λ‹¤.
   ```shell
   $ sudo service smbd restart
   ```

## IP μ„¤μ • λ°©λ²•
1. WSL2μ—μ„ μ•„λ μμ™€ κ°™μ΄ μ‹¤ν–‰ν•λ‹¤. (μ•„λ μμ—μ„λ” **eth0:1** μΈν„°νμ΄μ¤μ— **192.168.10.100** IP μ‚¬μ©)
   ```shell
   $ sudo ip addr add 192.168.10.100/24 broadcast 192.168.10.255 dev eth0 label eth0:1
   ```
   κ²°κ³Όλ΅ ifconfig λ…λ ΉμΌλ΅ ν™•μΈν•΄ λ³΄λ©΄ μ•„λμ™€ κ°™μ΄ **eth0:1** μΈν„°νμ΄μ¤κ°€ **192.168.10.100** μ£Όμ†λ΅ μ¶”κ°€λμ—μμ„ ν™•μΈν•  μ μλ‹¤.
   ```shell
   $ ifconfig eth0:1
   eth0:1: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        inet 192.168.10.100  netmask 255.255.255.0  broadcast 192.168.10.255
        ether 00:15:5d:8f:c4:59  txqueuelen 1000  (Ethernet)
   ```
1. Windows κ΄€λ¦¬μ κ¶ν•μ μ½μ†”μ—μ„ μ•„λμ™€ κ°™μ΄ μ‹¤ν–‰ν•λ‹¤. (μ•„λ μμ—μ„λ” **192.168.10.50** μ‚¬μ©)
   ```batch
   C:\>netsh interface ip add address "vEthernet (WSL)" 192.168.10.50 255.255.255.0
   ```
   κ²°κ³Όλ΅ ipconfig λ…λ ΉμΌλ΅ ν™•μΈμ‹ μ•„λμ™€ κ°™μ΄ **192.168.10.50**κ°€ μ¶”κ°€λμ—μμ„ ν™•μΈν•  μ μλ‹¤.
   ```
   μ΄λ”λ„· μ–΄λ‘ν„° vEthernet (WSL):

    μ—°κ²°λ³„ DNS μ ‘λ―Έμ‚¬. . . . :
    λ§ν¬-λ΅μ»¬ IPv6 μ£Όμ† . . . . : fe80::5015:a7fb:3b72:f483%46
    IPv4 μ£Όμ† . . . . . . . . . : 172.21.112.1
    μ„λΈλ„· λ§μ¤ν¬ . . . . . . . : 255.255.240.0
    IPv4 μ£Όμ† . . . . . . . . . : 192.168.10.50
    μ„λΈλ„· λ§μ¤ν¬ . . . . . . . : 255.255.255.0
    κΈ°λ³Έ κ²μ΄νΈμ›¨μ΄ . . . . . . :
    ```

## Windows μ‘μ—… μ¤μΌ€μ¤„λ¬μ— μ¶”κ°€
1. Windows λ¶€ν…μ‹λ§λ‹¤ μλ™μΌλ΅ IP μ„¤μ •μ΄ λκ² ν•λ ¤λ©΄ μ•„λ μμ™€ κ°™μ΄ λ°°μΉ νμΌμ„ μ‘μ„±ν•μ—¬ (μλ΅ **D:\wsl_samba.bat** νμΌλ΅ μ €μ¥) μ΄μ©ν•λ” κ²ƒμ΄ νΈν•λ‹¤.
   ```batch
   wsl -u root service smbd restart
   wsl -u root ip addr add 192.168.10.100/24 broadcast 192.168.10.255 dev eth0 label eth0:1
   netsh interface ip add address "vEthernet (WSL)" 192.168.10.50 255.255.255.0
   ```
   μ΄ν›„, μ΄ λ°°μΉ νμΌμ„ μ‘μ—… μ¤μΌ€μ¤„λ¬μ— μ¶”κ°€ν•λ©΄ λλ‹¤. (λ‹¨, μ„ λ°°μΉ νμΌμ€ κ΄€λ¦¬μ κ¶ν•μΌλ΅ μ‹¤ν–‰λμ–΄μ•Ό ν•λ―€λ΅, λ³΄μ• μµμ…μ—μ„ **"κ°€μ¥ λ†’μ€ μμ¤€μ κ¶ν•μΌλ΅ μ‹¤ν–‰"** λ€μ„ μ²΄ν¬ν•΄μ•Ό ν•¨)  
   μ»¤λ§¨λ“ λ°©μ‹μΌλ΅λ” μ½μ†”μ—μ„ μ•„λ μμ™€ κ°™μ΄ μ‹¤ν–‰ν•λ©΄ λλ‹¤.
   ```batch
   C:\>schtasks /Create /TN "WSL IP" /SC ONLOGON /RL HIGHEST /TR "'D:\wsl_samba.bat'"
   ```
1. λ¬Όλ΅  WSL2λ¥Ό shutdown μ‹μΌ°λ‹¤κ°€ λ‹¤μ‹ start μ‹ν‚¨ κ²½μ°μ—λ” WSL2μ—μ„ λ‹¤μ‹ μ•„λμ™€ κ°™μ΄ μ‹¤ν–‰ν•΄ μ£Όμ–΄μ•Ό ν•λ‹¤.
   ```shell
   $ sudo ip addr add 192.168.10.100/24 broadcast 192.168.10.255 dev eth0 label eth0:1
   $ sudo service smbd restart
   ```

## μ ‘μ† ν…μ¤νΈ
μ΄μ  Windowsμ—μ„ [\\\\192.168.10.100\user_name](\\192.168.10.100\user_name) μ£Όμ†μ™€ κ°™μ΄ WSL2 μ‚Όλ°”μ— μ ‘μ†ν•  μ μλ‹¤. (μ—¬κΈ°μ—μ„ μ„ IP μ„¤μ •μ„ ν• λ•λ¶„μ— **92.168.10.100** μ£Όμ†λ¥Ό κ³ μ •μ‹μΌμ„ μ‚¬μ©ν•  μ μμ)

## κ²°λ΅ 
Windows10μ—μ„ WSL2λ¥Ό μ‚¬μ©ν•λ” κ²½μ°μ—λ” νƒμƒ‰κΈ°μ—μ„ WSL2 νμΌ μ•΅μ„Έμ¤ μ†λ„κ°€ μ•„μ£Ό λλ¦° λ¬Έμ μ μ΄ μμ—λ”λ°, μ„μ™€ κ°™μ΄ μ‚Όλ°”λ¥Ό μ΄μ©ν•λ‹ μ΄ λ¬Έμ λ¥Ό νν”Όν•  μ μμ—λ‹¤. π…
