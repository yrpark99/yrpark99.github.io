---
title: "WSL2 κ΄€λ ¨ μ •λ¦¬"
category: WSL
toc: true
toc_label: "μ΄ νμ΄μ§€ λ©μ°¨"
---

WSL2 κ΄€λ ¨ν•μ—¬ κ°„λ‹¨ν μ •λ¦¬ν•΄ λ³΄μ•λ‹¤.

## μ°Έκ³  νμ΄μ§€
* [WSL μ„¤λ…μ„](https://docs.microsoft.com/ko-kr/windows/wsl/)
* [WSL Github νμ΄μ§€](https://github.com/microsoft/WSL/)
* [WSL Kernel Github νμ΄μ§€](https://github.com/microsoft/WSL2-Linux-Kernel/)

## WSL2 μ†κ°
Microsoftλ” Windows10 2015λ…„λ¶€ν„° Pro μ΄μƒ λ²„μ „μ—μ„ WSL(Windows Subsystem for Linux)μ„ μ§€μ›ν•κΈ° μ‹μ‘ν•μ€λ‹¤.  
κ·Έλ°λ° WSL1μ—μ„λ” Linux μ»¤λ„μ„ μ‚¬μ©ν•λ” κ²ƒμ΄ μ•„λ‹λΌ, μ—λ®¬λ μ΄ν„° μ•„ν‚¤ν…μ² κΈ°λ°μΌλ΅ λ¦¬λ…μ¤ λ°”μ΄λ„λ¦¬λ¥Ό κµ¬λ™ν•λ” νΈν™ λ μ΄μ–΄λ¥Ό λ§λ“¤κ³  μ΄λ¥Ό Windows μ»¤λ„ μ„μ—μ„ λ™μ‘μ‹μΌ°λ‹¤. λ”°λΌμ„ μ†λ„λ„ λλ Έκ³  κ³µμ‹μ μΌλ΅ 32bitκ°€ μ™„λ²½ν μ§€μ›λμ§€ μ•μ•κ³  (νΉν νμ‚¬μ—μ„ μ‚¬μ©ν•λ” cross ν΄μ²΄μΈμ— 32bit μ „μ©μ΄ μμ—μ), λ™μ‘ν•μ§€ μ•λ” μ„λΉ„μ¤κ°€ λ§μ€ λ“± μ μ•½κ³Ό λ¶νΈμ΄ λ§μ•μ—λ‹¤.  
<br>
μ΄ν›„ Windows 2004 λ²„μ „λ¶€ν„°λ” WSL2λ¥Ό μ§€μ›ν•μ€λ‹¤. WSL2λ” Hyper-V κΈ°λ°μ κ°€μƒν™” κΈ°μ μ„ μ΄μ©ν•μ—¬ μ‹¤μ λ΅ Linux μ»¤λ„μ„ μ§μ ‘ νƒ‘μ¬ν•μ—¬ μ¨μ „ν• μ‹μ¤ν… μ½ νΈν™μ„±μ„ μ™„μ„±ν•μ€κ³  νμΌ I/Oλ„ λΉ¨λΌμ§€λ” λ“± λ§μ€ λ°μ „μ΄ μμ—λ‹¤. (μ‚¬μ©ν• Linux μ»¤λ„μ μ†μ†λ” κ³µκ°λμ–΄ μκ³ , μ‚¬μ©μκ°€ μ΄ μ»¤λ„μ„ μμ •/λΉλ“ν•μ—¬ μ‚¬μ©ν•  μλ„ μμ)  
ν•νΈ Pro μ΄μƒμ λ²„μ „μ΄ ν•„μ”ν–λ WSL1κ³Όλ” λ‹¬λ¦¬ μ΄μ λ” Home λ²„μ „μ—μ„λ„ μ§€μ›μ€κ³ , λν• 2020 ν›„λ°μ—λ” 1903, 1909 λ²„μ „μ— λ€ν•΄μ„λ„ backport μ‘μ—…μ„ ν•΄μ„ μ΄ λ²„μ „λ“¤μ—μ„λ„ WSL2λ¥Ό μ§€μ›ν•κ² λμ—λ‹¤. (λ§μ΄ν¬λ΅μ†ν”„νΈκ°€ WSLμ„ λ―Έλ” λ¨μ–‘μƒ. Microsoft π§΅π§)  
<br>
λ‚λ” WSLμ΄ μ§€μ›λ μ΄ν›„λ΅ Linuxμ—μ„μ ν…μ¤νΈκ°€ ν•„μ”ν• κ²½μ°λ‚ (κΈ°μ΅΄ μ„λ²„μ— μ„¤μΉν•μ—¬ ν…μ¤νΈν•κΈ° μ „μ—) λλ” λ‚λ§μ ν™κ²½ κµ¬μ¶•μ΄ ν•„μ”ν• κ²½μ°μ— WSLμ΄ VirtualBoxμ— λΉ„ν•΄μ„ λΉ λ¥΄κ³  νΈλ¦¬ν•΄μ„ WSLμ„ λ§μ΄ μ΄μ©ν•λ‹¤. (μ‚¬μ‹¤ μ΄ λΈ”λ΅κ·Έλ„ μ™Έλ¶€ dependencyκ°€ μλ” ν¨ν‚¤μ§€κ°€ λ§μ€ κ΄€κ³„λ΅ μ²μλ¶€ν„° WSL ν™κ²½μ—μ„ local μ›Ήμ„λ²„ λ„μ›μ„ κ²°κ³Όλ¥Ό ν™•μΈν• ν›„μ— Githubμ— μ¬λ¦¬κ³  μμ)

## WSL μ‚¬μ „ μ„¤μΉ μ¤€λΉ„
1. Powershell κ΄€λ¦¬μ λ¨λ“μ—μ„ μ•„λμ™€ κ°™μ΄ μ‹¤ν–‰ν•μ—¬ WSLκ³Ό "κ°€μƒ λ¨Έμ‹  ν”λ«νΌ" μµμ… κΈ°λ¥μ„ μ‚¬μ©ν•λ„λ΅ μ„¤μ •ν•λ‹¤.
   ```ps
   PS C:\> dism.exe /online /enable-feature /featurename:Microsoft-Windows-Subsystem-Linux /all /norestart
   PS C:\> dism.exe /online /enable-feature /featurename:VirtualMachinePlatform /all /norestart
   ```
   μ΄ν›„ μ‹μ¤ν…μ„ μ¬λ¶€ν…ν•λ‹¤.
1. [Linux μ»¤λ„ μ—…λ°μ΄νΈ ν¨ν‚¤μ§€](https://docs.microsoft.com/ko-kr/windows/wsl/wsl2-kernel) νμ΄μ§€μ—μ„ WSL2 Linux μ»¤λ„ μ—…λ°μ΄νΈ ν¨ν‚¤μ§€λ¥Ό λ‹¤μ΄λ΅λ“ν• ν›„, μ„¤μΉν•λ‹¤. μ΄λ΅μ¨ μ‚¬μ „ μ„¤μΉ μ¤€λΉ„λ” μ™„λ£λμ—λ‹¤.

## WSL μ„¤μΉ
1. μƒλ΅μ΄ λ°°ν¬νμ„ μ„¤μΉμ‹μ— λ””ν΄νΈλ΅ WSL2λ¥Ό μ‚¬μ©ν•λ„λ΅ μ„¤μ •ν•λ ¤λ©΄ μ•„λμ™€ κ°™μ΄ ν•λ©΄ λλ‹¤. (κµ³μ΄ WSL1μ„ μ‚¬μ©ν•  ν•„μ”κ°€ μ—†μΌλ―€λ΅ λ¬΄μ΅°κ±΄ μ„¤μ •ν•΄ λ†“λ” κ²ƒμ΄ νΈν•¨)
   ```shell
   C:\>wsl --set-default-version 2
   ```
1. μ΄μ  Microsoft Storeμ—μ„ WSLμ„ κ²€μƒ‰ν•΄μ„ μ›ν•λ” λ°°ν¬νμ„ μ„¤μΉν•λ‹¤.
1. ν„μ¬ μ„¤μΉλ Linux λ°°ν¬νμ€ μ•„λμ™€ κ°™μ΄ ν™•μΈν•  μ μλ‹¤. (-lμ€ λ°°ν¬ν list, -v μµμ…μ€ μμ„Έν• μ •λ³΄λ¥Ό ν‘μ‹λκ² ν•¨)
   ```shell
   C:\>wsl -l -v
   ```
1. λ§μ•½μ— κΈ°μ΅΄ WSL1μΌλ΅ Linux λ°°ν¬νμ„ μ„¤μΉν•μ€μΌλ©΄, μ•„λμ™€ κ°™μ΄ Linux λ°°ν¬ν μ΄λ―Έμ§€λ¥Ό WSLμ„ WSL2λ΅ λ³€ν™μ‹ν‚¬ μ μλ‹¤. (λ§¨ λμ `2`λ” WSL λ²„μ „ **2**λ¥Ό λ‚νƒ€λƒ„)
   ```shell
   C:\>wsl --set-version <λ°°ν¬ν μ΄λ¦„> 2
   ```
   κ²°κ³Όλ΅ **"λ³€ν™μ΄ μ™„λ£λμ—μµλ‹λ‹¤"** λΌλ” λ©”μ‹μ§€κ°€ μ¶λ ¥λλ©΄, μ •μƒμ μΌλ΅ μ „ν™μ΄ μ™„λ£λ κ²ƒμ΄λ‹¤.

## WSL μ‹¤ν–‰
WSL μ„¤μΉκ°€ λλ‚λ©΄ WSL μ•„μ΄μ½μ΄ μƒμ„±λκ³  μ΄κ²ƒμ„ μ‹¤ν–‰ν•λ©΄ ν„°λ―Έλ„μ΄ λ¨κ³  WSLμ— λ΅κ·ΈμΈλκ³ , μ‚¬μ©μ home λ””λ ‰ν† λ¦¬λ΅ μ΄λ™ν•λ‹¤.  
λλ” Windows consoleμ—μ„ μ•„λμ™€ κ°™μ΄ `wsl.exe`λ¥Ό μ‹¤ν–‰μ‹μΌλ„ λλ‹¤. (λ‹¨, λ°°ν¬νμ΄ μ—¬λ¬ κ° μ„¤μΉλ κ²½μ°μ—λ” `-d <λ°°ν¬ν μ΄λ¦„>` μµμ…μ„ μ¶”κ°€ν•΄μ•Ό ν•¨)
```shell
C:\>wsl
```
κ·Έλ°λ° μ΄ λ°©λ²•μ€ ν„μ¬ κ²½λ΅κ°€ /mnt/c κ²½λ΅λ΅ λκ³ , home λ””λ ‰ν† λ¦¬λ΅ μ΄λ™ν•λ ¤λ©΄ λ³„λ„μ `cd` λ…λ Ήμ„ μ…λ ¥ν•΄μ•Ό ν•λ―€λ΅, μ•½κ°„ λ¶νΈν•λ‹¤. κ·Έλμ„ λ‚λ” μ•„λμ™€ κ°™μ΄ μ‹¤ν–‰ν•λ”λ°, μ΄λ ‡κ² ν•λ©΄ home λ””λ ‰ν† λ¦¬λ΅ λ°”λ΅ μ΄λ™ν•λ‹¤. (λ‹¨, λ°°ν¬νμ΄ μ—¬λ¬ κ° μ„¤μΉλ κ²½μ°μ—λ” `-d <λ°°ν¬ν μ΄λ¦„>` μµμ…μ„ μ¶”κ°€ν•΄μ•Ό ν•¨)
```shell
C:\>wsl ~
```
λ‚λ” λ³΄ν†µ Windows console λ³΄λ‹¤λ” μΆ€ λ” λ§μ€ κΈ°λ¥μ„ μ κ³µν•λ” [Windows Terminal](https://github.com/microsoft/terminal)μ΄λ‚ [MobaXterm](https://mobaxterm.mobatek.net/)μ„ μ‚¬μ©ν•λ”λ°, μ΄κ²ƒλ“¤μ€ μλ™μΌλ΅ WSLμ„ μΈμ‹ν•κ³  κ·Έμ™Έ λ§μ€ κΈ°λ¥μ„ μ κ³µν•λ‹¤. μ°Έκ³ λ΅ μ•„λλ” `Windows Terminal`μ λ‚΄ profile μ„¤μ • μμ΄λ‹¤.
```json
{
    "acrylicOpacity" : 0.5,
    "closeOnExit" : "graceful",
    "colorScheme" : "One Half Dark",
    "commandline" : "wsl.exe ~ -d Ubuntu-18.04",
    "cursorColor" : "#FFFF00",
    "cursorShape" : "vintage",
    "fontFace" : "D2Coding",
    "fontSize" : 12,
    "guid": "{c6eaf9f4-32a7-5fdc-b5cf-066e8a4b1e40}",
    "historySize" : 9001,
    "icon" : "ms-appdata:///roaming/ubuntu_32px.png",
    "name": "WSL 18.04",
    "padding" : "5, 5, 5, 5",
    "snapOnInput" : true,
    "source": "Windows.Terminal.Wsl",
    "useAcrylic" : true
},
```

## WSL μΆ…λ£
λ³΄ν†µμ€ μ‹¤ν–‰ μ¤‘μΈ Linuxλ¥Ό λ³„λ„λ΅ μΆ…λ£μ‹ν‚¬ ν•„μ”λ” μ—†κ² μ§€λ§, ν•„μ”μ— λ”°λΌ μ•„λμ™€ κ°™μ΄ μΆ…λ£μ‹ν‚¬ μ μλ‹¤.
```shell
C:\>wsl --shutdown
```
μ„μ™€ κ°™μ΄ ν•λ©΄ λ¨λ“  λ°°ν¬νμ μ‹¤ν–‰ μ¤‘μΈ Linuxκ°€ μΆ…λ£λκ³ , μ•„λμ™€ κ°™μ΄ ν•λ©΄ ν•΄λ‹Ή λ°°ν¬νλ§ μΆ…λ£λλ‹¤.
```shell
C:\>wsl -d <λ°°ν¬ν μ΄λ¦„> --shutdown
```
μ΄μ  `wsl -l -v` λ…λ ΉμΌλ΅ ν™•μΈν•΄ λ³΄λ©΄, stopped λμ—μμ„ ν™•μΈν•  μ μλ‹¤. λ‹¤μ‹ wslμ„ μ‹¤ν–‰μ‹ν‚¤λ©΄ ν•΄λ‹Ή λ°°ν¬νμ΄ λ‹¤μ‹ μ‹¤ν–‰λλ‹¤.

## WSL λ°°ν¬ν μ‚­μ 
WSL λ°°ν¬ν μ‚­μ λ” μΌλ°μ μΈ μ•± μ κ±°μ™€ λ§μ°¬κ°€μ§€λ΅ Windows μ„¤μ • λ©”λ‰΄μ `μ•±` -> `μ•± λ° κΈ°λ¥`μ—μ„ (μ¦‰, `ν”„λ΅κ·Έλ¨ μ¶”κ°€/μ κ±°`) ν•λ©΄ λλ‹¤.  
λ‹¨μν WSL listμ—μ„λ§ λ‚μ¤μ§€ μ•κ² ν•λ ¤λ©΄ μ•„λμ™€ κ°™μ€ μ»¤λ§¨λ“λ΅ ν•  μ μλ‹¤.
```shell
C:\>wsl --unregister <λ°°ν¬ν μ΄λ¦„>
```

## WSL λ°°ν¬ν μ—…λ°μ΄νΈ
WSL λ°°ν¬νμ€ λ””ν΄νΈλ΅ LTS λ²„μ „μ„ κ²€μ‚¬ν•΄μ„ μ—…λ°μ΄νΈν•κ² λμ–΄ μλ”λ°, LTS λ²„μ „λ§μ΄ μ•„λ‹ normal λ²„μ „μΌλ΅λ„ μ—…λ°μ΄νΈ κ°€λ¥ν•κ² ν•λ ¤λ©΄ μ•„λμ™€ κ°™μ΄ ν•λ©΄ λλ‹¤.
1. `/etc/update-manager/release-upgrades` νμΌμ—μ„ Prompt κ°’μ„ λ””ν΄νΈ `lts`μ—μ„ μ•„λμ™€ κ°™μ΄ μμ •ν•λ‹¤.
   ```ini
   Prompt=normal
   ```
1. μ΄ν›„ μ•„λμ™€ κ°™μ΄ μ‹¤ν–‰ν•λ©΄ normal λ²„μ „μΌλ΅λ„ μ—…λ°μ΄νΈν•  μ μλ‹¤.
   ```shell
   $ sudo apt-get update
   $ sudo apt-get dist-upgrade
   $ sudo do-release-upgrade
   ```
1. μ—…λ°μ΄νΈκ°€ λλ‚λ©΄ μ•„λμ™€ κ°™μ΄ ν™•μΈν•΄ λ³Ό μ μλ‹¤.
   ```shell
   $ lsb_release -a
   ```

## WSL Kernel μμ •ν•κΈ°
λ³΄ν†µμ€ Kernelμ„ μμ •ν•  μΌμ΄ μ—†κΈ΄ ν•μ§€λ§, Kernel configλ¥Ό μμ •ν•κ±°λ‚ μ†μ¤λ¥Ό μμ •ν•΄μ•Ό ν•λ” κ²½μ°μ—λ” Kernel μ†μ¤λ¥Ό λ‹¤μ΄λ°›μ•„μ„ μ§μ ‘ λΉλ“ν•  μ μλ‹¤. (λ‚ κ°™μ€ κ²½μ°μ—λ” `nandsim`μ„ μ‚¬μ©ν•κΈ° μ„ν•μ—¬ configurationμ„ μμ •ν• ν›„ μ¬λΉλ“ν•΄μ„ μ‚¬μ©ν•μ€λ‹¤. WSL1μ—μ„λ” Kernel μμ •μ΄ λ¶κ°€λ¥ν• μΌμ΄μ—λ”λ°, WSL2μ—μ„λ” μ§μ ‘ Kernelμ„ μμ • λ° λΉλ“ν•  μ μμΌλ‹ λ„λ¬΄ μΆ‹λ‹¤. π‹)  
μ•„λμ™€ κ°™μ΄ ν•λ©΄ λλ‹¤.
1. [WSL2-Linux-Kernel](https://github.com/microsoft/WSL2-Linux-Kernel/releases) νμ΄μ§€μ—μ„ μ‚¬μ©ν•λ ¤λ” λ²„μ „μ Kernel μ†μ¤λ¥Ό λ‹¤μ΄λ°›μ•„μ„ μ••μ¶•μ„ ν’€κ±°λ‚, μ•„λμ™€ κ°™μ΄ GitμΌλ΅ clone λ°›κ³  ν•΄λ‹Ή λ””λ ‰ν† λ¦¬λ΅ μ΄λ™ν•λ‹¤.
   ```shell
   $ git clone https://github.com/microsoft/WSL2-Linux-Kernel.git
   $ cd WSL2-Linux-Kernel/
   ```
1. μ•„λμ™€ κ°™μ΄ λΉλ“μ— ν•„μ”ν• ν¨ν‚¤μ§€λ¥Ό μ„¤μΉν•λ‹¤.
   ```shell
   $ sudo apt install build-essential libncurses-dev flex bison libelf-dev libssl-dev
   ```
1. μ†μ¤ λ””λ ‰ν† λ¦¬μ—μ„ μ•„λμ™€ κ°™μ΄ config νμΌμ„ λ³µμ‚¬ν• ν›„, menu configλ¥Ό μ‹¤ν–‰ν•μ—¬ configuration ν• ν›„ μ €μ¥ν•λ‹¤. 
   ```shell
   $ cp Microsoft/config-wsl .config
   $ make menuconfig
   ```
   μ΄ν›„ μ•„λμ™€ κ°™μ΄ λΉλ“ν•λ‹¤.
   ```shell
   $ make -j4
   ```
   >μ°Έκ³ λ΅ μ„ λ°©λ²• λ€μ‹ μ— μ•„λμ™€ κ°™μ΄ .config νμΌμ„ μ΄μ©ν•μ§€ μ•κ³ , **Microsoft/config-wsl** νμΌμ„ μ§μ ‘ μ΄μ©ν•  μλ„ μλ‹¤.
   >```shell
   >$ make menuconfig KCONFIG_CONFIG=Microsoft/config-wsl
   >$ make -j4 KCONFIG_CONFIG=Microsoft/config-wsl
   >```
1. κ²°κ³Όλ΅ `arch/x86/boot/bzImage` νμΌμ΄ μƒμ„±λλ”λ°, μ΄ νμΌμ„ Windows λ“λΌμ΄λΈλ΅ λ³µμ‚¬ν• ν›„, μ•„λμ™€ κ°™μ΄ WSLμ„ μΆ…λ£μ‹ν‚¨λ‹¤.
   ```shell
   C:\>wsl --shutdown
   ````
1. λ³µμ‚¬ν• `bzImage` νμΌμ„ `C:\Windows\System32\lxss\tools\` λ””λ ‰ν† λ¦¬μ— μλ” `kernel` νμΌλ΅ overwrite ν•λ‹¤.
   > μ°Έκ³ λ΅ `%HOMEPATH%\.wslconfig` νμΌμ„ μ•„λ μμ™€ κ°™μ΄ μ‘μ„±ν•μ—¬ Kernel κ²½λ΅λ¥Ό λ³€κ²½ν•  μ μλ”λ°, μ΄ κ²½μ°μ—λ” ν•΄λ‹Ή λ””λ ‰ν† λ¦¬λ΅ λ³µμ‚¬ν•λ©΄ λλ‹¤.
   ```yml
   [wsl2]
   kernel=C:\\Users\\myCustomKernel # Kernel image
   ```
1. μ΄μ  λ‹¤μ‹ WSLμ„ μ‹μ‘ν• ν›„, `uname` λ…λ ΉμΌλ΅ λΉλ“λ Kernelμ΄ μ μ©λμ—λ”μ§€ ν™•μΈν•΄ λ³Έλ‹¤.

## κΈ°νƒ€ ν
* Visual Studio Code  
  VSCodeλ΅ WSLμ— μλ” μ†μ¤λ¥Ό κ°λ°ν•λ” κ²½μ°μ—λ” `Remote - WSL` extensionμ„ μ„¤μΉν•μ—¬ μ‚¬μ©ν•λ” κ²ƒμ΄ νΈν•λ‹¤.
* WSL2 μ „μ—­ μ„¤μ •  
  μ„¤μ • νμΌμ€ `%HOMEPATH%\.wslconfig` νμΌλ΅ μ•„λ μμ™€ κ°™μ΄ Kernel μ΄λ―Έμ§€, memory, processors λ“±μ„ μ„¤μ •ν•  μ μλ‹¤.
  ```yml
  [wsl2]
  kernel=C:\\Windows\\System32\\lxss\\tools\\kernel # Kernel image
  memory=4GB # Limits VM memory in WSL 2 to 4 GB
  processors=2 # Makes the WSL 2 VM use two virtual processors
   ```
* WSL2 startup μ‹ μ‹¤ν–‰μ‹ν‚¤κ³  μ‹¶μ€ λ…λ Ήμ–΄ μ¶”κ°€ν•κΈ°  
  Linux λ°°ν¬νμ `/etc/wsl.conf`Β νμΌμ—μ„ μ•„λ μμ™€ κ°™μ΄ μ¶”κ°€ν•λ©΄ λλ‹¤.
  ```ini
  [boot]
  command="echo your command"
  ```
* Windowsμ—μ„ WSLλ΅ SSH μ ‘μ†ν•κΈ° (μµμ… μ‚¬ν•­)  
  WSLλ΅ μ§μ ‘ μ ‘μ†ν•λ©΄ λλ―€λ΅, κµ³μ΄ SSHλ΅ μ ‘μ†ν•  ν•„μ”κ°€ μ—†κΈ°λ” ν•λ‚, WSL2μ—μ„ SSH μ„λ²„λ¥Ό μ¬μ„¤μΉν• ν›„, WSL2 λ‚΄μ λ¦¬λ…μ¤ IPλ΅ μ ‘μ†ν•  μ μλ‹¤.  
  μ•„λμ™€ κ°™μ΄ SSH server ν¨ν‚¤μ§€λ¥Ό μ¬μ„¤μΉν•λ‹¤.
  ```shell
  $ sudo apt-get purge openssh-server
  $ sudo apt-get install openssh-server
  ```
  μ΄ν›„, `/etc/ssh/sshd_config` νμΌμ—μ„ μ•„λ μ£Όμ„μ„ ν•΄μ ν•λ‹¤.
  ```yml
  PermitRootLogin prohibit-password
  ```
  μ•„λμ™€ κ°™μ΄ ssh μ„λ²„λ¥Ό μ¬μ‹μ‘ μ‹ν‚¨λ‹¤.
  ```shell
  $ sudo service ssh --full-restart
  ```
  μ΄μ  μ•„λμ™€ κ°™μ΄ Windowsμ—μ„ Linux eth0 IP μ£Όμ†λ΅ ssh μ ‘μ†ν•  μ μλ‹¤.
  ```shell
  C:\>ssh -l <user_id> <WSL eth0 IP>
  ```
* PATHμ—μ„ Windows κ²½λ΅ μ κ±°ν•κΈ°  
  μ„¤μΉ ν›„μ— Linuxμ—μ„ PATHλ¥Ό ν™•μΈν•΄ λ³΄λ©΄, Linux PATH μ΄ν›„μ— μμ‹ μ Windows PATHκ°€ λ’¤μ— λ§λ¶™μ—¬μ Έ μμμ„ ν™•μΈν•  μ μλ‹¤. λ§μ•½ Windows PATHκ°€ λ¶™λ” κ²ƒμ΄ μ‹«μΌλ©΄, Linux λ°°ν¬νμ—μ„ `/etc/wsl.conf` νμΌμ„ μ•„λμ™€ κ°™μ΄ μ‘μ„±ν• ν›„, λ‹¤μ‹ μ‹¤ν–‰ν•λ©΄ λλ‹¤.
  ```ini
  [interop]
  appendWindowsPath = false
  ```
  μ΄ κ²½μ° Windows PATHκ°€ λ¨λ‘ μ κ±°λμ—μΌλ―€λ΅, Windowsμ νƒμƒ‰κΈ°λ‚ VSCode μ‹¤ν–‰μ„ μ„ν•΄μ„λ” `~/.bashrc` νμΌμ—μ„ μ•„λ μμ™€ κ°™μ΄ aliasμ™€ PATHλ¥Ό μ¶”κ°€ν•λ” κ²ƒμ΄ νΈν•λ‹¤.
  ```shell
  alias code='/mnt/c/Program\ Files/Microsoft\ VS\ Code/bin/code'
  export PATH=$PATH:"/mnt/c/Windows"
  ```
* λ„¤νΈμ›ν¬ λ“λΌμ΄λΈλ΅ μ—°κ²°ν•κΈ°  
  νƒμƒ‰κΈ°μ—μ„ `\\wsl$`λ¥Ό μ…λ ¥ν•λ©΄ μ„¤μΉλ λ°°ν¬νλ“¤μ΄ λ””λ ‰ν† λ¦¬λ΅ λ‚μ¤λ”λ°, μ—°κ²°ν•λ ¤λ” λ°°ν¬νμ„ μ„ νƒν• ν›„, λ§μ°μ¤ μ°ν΄λ¦­ν•μ—¬ "λ„¤νΈμ›ν¬ λ“λΌμ΄λΈ μ—°κ²°"μ„ μ‹¤ν–‰ν•λ©΄ λλ‹¤. (μ: \\wsl$\Ubuntu-18.04\)
* USB μ €μ¥ μ¥μΉ λ§μ΄νΈ
  * μ•„λ μμ™€ κ°™μ΄ λ§μ΄νΈμ‹ν‚¬ μ μλ‹¤. (μλ΅ **E** λ“λΌμ΄λΈλ¥Ό **/mnt/e** κ²½λ΅μ— λ§μ΄νΈ)
    ```shell
    $ sudo mkdir /mnt/e
    $ sudo mount -t drvfs E: /mnt/e
    ```
  * μ•„λμ™€ κ°™μ΄ μ–Έλ§μ΄νΈμ‹ν‚¬ μ μλ‹¤. (μλ΅ **/mnt/e** κ²½λ΅λ¥Ό μ–Έλ§μ΄νΈ)
    ```shell
    $ sudo umount /mnt/e
    ```
* 32bit μ§€μ›ν•κΈ°  
  WSL1μ—μ„λ” κ³µμ‹μ μΌλ΅ μ§€μ›λμ§€ μ•μ•„μ„ μ‰½μ§€ μ•μ•μΌλ‚, WSL2μ—μ„λ” μΌλ° Linux λ°°ν¬νκ³Ό λ§μ°¬κ°€μ§€λ΅ μ•„λ μμ™€ κ°™μ΄ μ‰½κ² 32bit μ§€μ›μ„ ν•  μ μλ‹¤. (μ΄μ  32bit cross ν΄μ²΄μΈλ„ μ λλ‹¤. π‹)
  ```shell
  $ sudo dpkg --add-architecture i386
  $ sudo apt update
  $ sudo apt install libc6:i386 libncurses5:i386 libstdc++6:i386 zlib1g:i386
  ```
* GUI ν”„λ΅κ·Έλ¨ μ‹¤ν–‰ν•κΈ°  
  * X serverλ¥Ό μ΄μ©ν•λ©΄ λλ”λ°, Windowsμ—μ„ μ‚¬μ© κ°€λ¥ν• X serverμ—λ” `VcXSrv`, `Xming` λ“±μ΄ μλ‹¤. (μ°Έκ³ λ΅ λ‚λ” WSLλ„ μ§€μ›ν•κ³  μμ²΄μ μΌλ΅ X serverλ¥Ό λ‚΄μ¥ν•κ³  μλ” λ°λ‹¤κ°€ κΈ°νƒ€ κΈ°λ¥λ„ λ§μ€ [MobaXterm](https://mobaxterm.mobatek.net/) ν”„λ΅κ·Έλ¨μ„ μ• μ©ν•κ³  μμ)
  * λλ” WSL2λ¥Ό μ§€μ›ν•λ” `GWSL` μ•±λ„ νΈν•λ‹¤. μ΄κ²ƒμ€ Microsoft storeμ—μ„ μ„¤μΉν•  μ μλ”λ°, μµμ΄ μ‹¤ν–‰μ‹ λ°©ν™”λ²½μ— ν—μ© μ¶”κ°€λ¥Ό ν•΄ μ£Όκ³ , GWSL λ©”λ‰΄ -> **Dashboard**μ—μ„ WSL λ°°ν¬ν μ„ νƒ λ° **auto export display**λ¥Ό μ„ νƒν•΄ μ£Όλ©΄ λλ‹¤. (μ°Έκ³ λ΅ Linuxμ—μ„ `DISPLAY` ν™κ²½ λ³€μλ¥Ό ν™•μΈν•΄ λ³΄λ©΄ μλ™μΌλ΅ μ„Έν…λμ–΄ μμμ„ ν™•μΈν•  μ μμ)
  * λλ” Windowsμ μ›κ²© λ°μ¤ν¬ν†±μ„ μ΄μ©ν•  μ μλ”λ°, Linuxμ—μ„ μ•„λμ™€ κ°™μ΄ μ„¤μΉ λ° μ‹¤ν–‰ν•λ‹¤.
    ```shell
    $ sudo apt install xfce4
    $ sudo apt install xrdp
    $ sudo systemctl enable xrdp
    $ echo xfce4-session > ~/.xsession
    $ sudo service xrdp restart
    ```
    μ΄ν›„ Windowsμ—μ„ "μ›κ²© λ°μ¤ν¬ν†± μ—°κ²°"μ„ μ‹¤ν–‰ν•΄μ„ Linuxμ eth0 IP μ£Όμ†λ΅ μ—°κ²°ν•λ©΄ λλ‹¤.
  * ν•μ§€λ§ μ•„λ¬΄λλ„ WSLμ—μ„ μμ²΄μ μΌλ΅ μ§€μ›ν•μ§€ μ•μ•„μ„ λ¶νΈν• μ μ΄ μλ‹¤. μ›λ 2020λ…„μ— GUI λ° GPUλ¥Ό μ§€μ›ν•κΈ°λ΅ μμ •λμ–΄ μμ—λ”λ°, GPUλ” κ³µμ‹ μ§€μ›λμ—μΌλ‚ μ•„μ§ GUIλ” κ³µμ‹ μ§€μ›λμ§€ μ•κ³  μλ‹¤. 2021λ…„μ— GUIλ„ κ³µμ‹ μ§€μ›λλ©΄ μ΄ λ¶€λ¶„λ„ ν›¨μ”¬ νΈν•΄μ§ κ²ƒμ΄λ‹¤.
* <span style="color:red">Docker</span> μ‚¬μ©ν•κΈ°  
  WSL1μ€ Linux μ»¤λ„μ„ μ‚¬μ©ν• κ²ƒμ΄ μ•„λ‹μ—μΌλ―€λ΅, docker λ°λ¬μ„ μ§μ ‘ μ§€μ›ν•μ§€ μ•κ³  Windowsμ docker λ°λ¬μ„ WSLμ—μ„ νΈμ¶ν•μ€μ—λ‹¤. μ΄λ΅ μΈν•΄ Windowsμ—μ„λ„ λ³„λ„μ μ„¤μΉκ°€ ν•„μ”ν•μ€μΌλ‚, WSL2μ—μ„λ” Linux μμ²΄μ—λ§ dockerλ¥Ό μ„¤μΉν•΄μ„ λ™μ‘μ‹ν‚¬ μ μλ‹¤.  
  λ¬Όλ΅  WSL2μ—μ„λ„ μ—¬μ „ν [Docker Desktop for Windows](https://hub.docker.com/editions/community/docker-ce-desktop-windows)λ¥Ό μ΄μ©ν•  μ μμΌλ‚, Windowsμ—μ„ dockerλ¥Ό κµ¬λ™μ‹ν‚¤μ§€ μ•λ” ν™κ²½μ΄λΌλ©΄, μ•„λμ²λΌ Linuxμ—μ„λ§ dockerλ¥Ό μ„¤μΉν•λ” λ°©λ²•μ΄ ν›¨μ”¬ νΈλ¦¬ν•λ‹¤.
  1. WSL2μ— λ΅κ·ΈμΈν•μ—¬ μ•„λμ™€ κ°™μ΄ μ„¤μΉ λ° μ„Έν…μ„ ν•λ‹¤.
     ```shell
     $ sudo apt-get install apt-transport-https ca-certificates curl software-properties-common
     $ curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -
     $ sudo add-apt-repository "deb [arch=amd64] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable"
     $ sudo apt-get update
     $ sudo apt-get install docker-ce
     ```
  1. μ„¤μΉκ°€ μ™„λ£ λμ—μΌλ©΄, μ•„λμ™€ κ°™μ΄ docker serviceλ¥Ό μ‹¤ν–‰μ‹ν‚¨λ‹¤.
     ```shell
     $ sudo service docker start
     ```
  1. μ•„λμ™€ κ°™μ΄ μ‹¤ν–‰ν•λ©΄ docker λ…λ Ήμ‹ sudo λ…λ Ήμ„ μƒλµν•  μ μμΌλ―€λ΅ νΈλ¦¬ν•λ‹¤.
     ```shell
     $ sudo usermod -aG docker $(whoami)
     ```
  1. λ¶€ν…μ‹ docker μ„λΉ„μ¤λ¥Ό μλ™μΌλ΅ start μ‹ν‚¤λ ¤λ©΄ `/etc/sudoers` νμΌμ— μ•„λμ™€ κ°™μ΄ μ¶”κ°€ν•λ‹¤. (μ¦‰, service λ…λ Ήμ–΄λ¥Ό root κ¶ν•μΌλ΅ μ•”νΈμ—†μ΄ μ‹¤ν–‰μ‹ν‚΄)
     ```shell
     %sudo ALL=(ALL:ALL) NOPASSWD: /usr/sbin/service
     ```
     μ΄ν›„ `~/.bashrc` νμΌμ— μ•„λμ™€ κ°™μ΄ μ¶”κ°€ν•λ‹¤.
     ```shell
     service docker status > /dev/null || sudo service docker start > /dev/null
     ```
     μ°Έκ³ λ΅ λ§μ•½μ— `/etc/sudoers` νμΌμ΄ μλ»λλ©΄ μ΄ν›„ `sudo` λ…λ Ήμ„ μ‚¬μ©ν•μ§€ λ»ν•κ² λλ”λ°, μ΄ κ²½μ°μ—λ” `C:\>wsl -u root` λ…λ ΉμΌλ΅ rootλ΅ λ΅κ·ΈμΈν•μ—¬ `/etc/sudoers` νμΌμ„ μ¬λ°”λ¥΄κ² μμ •ν•λ©΄ λλ‹¤.
* <span style="color:red">NFS μ„λ²„</span> μ„¤μΉ  
  μ΄ λ°©λ²•μ€ μ•μ•„λ‚΄κΈ°κ°€ μ‰½μ§€ μ•μ•λ‹¤. κΈ°λ³Έμ μΌλ΅ WSL2μ λ„¤νΈμ›ν¬λ” NATλ¥Ό μ‚¬μ©ν•κΈ° λ•λ¬Έμ— 172 λ€μ—­μ λ‚΄λ¶€ IPλ¥Ό λ™μ μΌλ΅ ν• λ‹Ήλ°›κ³ , λ”°λΌμ„ Windowsμ—μ„λ” μ μ ‘κ·Όμ΄ λμ§€λ§, μ™Έλ¶€μ—μ„λ” μ ‘κ·Όμ΄ λμ§€ μ•λ”λ‹¤. λ€μ•μΌλ΅ NAT λ€μ‹ μ— μ•„λμ™€ κ°™μ΄ **bridge** λ¨λ“λ¥Ό μ΄μ©ν•  μ μλ‹¤.  
  1. WSL2μ λ„¤νΈμ›ν¬λ” Hyper-V κ°€μƒν™” κΈ°λ°μΌλ΅ λ™μ‘ν•λ―€λ΅, `Hyper-V κ΄€λ¦¬μ`λ¥Ό κ΄€λ¦¬μ κ¶ν•μΌλ΅ μ‹¤ν–‰μ‹ν‚¨ ν›„ (μ‚¬μ „μ— `Windows κΈ°λ¥ μΌκΈ°/λ„κΈ°`μ—μ„ `Hyper-V` ν•­λ©μ΄ μ„¤μΉλμ–΄ μμ–΄μ•Ό ν•¨), "κ°€μƒ μ¤μ„μΉ κ΄€λ¦¬μ" ν•­λ©μ„ ν΄λ¦­ν•λ‹¤.
  1. κ°€μƒ μ¤μ„μΉ ν•­λ© μ¤‘μ—μ„ "WSL" ν•­λ©μ„ μ„ νƒν• ν›„, μ—°κ²° ν•μ‹μ„ "**μ™Έλ¶€ λ„¤νΈμ›ν¬**"λ΅ λ³€κ²½ν•λ‹¤. μ λ€λ΅ μ„¤μ •λμ—μΌλ©΄ "μ μ–΄ν -> λ„¤νΈμ›ν¬ λ° μΈν„°λ„· -> λ„¤νΈμ›ν¬ μ—°κ²°" λ©”λ‰΄μ—μ„ "vEthernet (WSL)" ν•­λ©μ„ ν™•μΈν•΄ λ³΄λ©΄ bridge λ¨λ“λ΅ μ—°κ²°λμ—μμ„ ν™•μΈν•  μ μλ‹¤.
  1. λ³€κ²½ λ‚΄μ©μ΄ μ μ©λμ—μΌλ©΄ WSLμ„ μƒλ΅ λ„μ΄ ν›„, ifconfigλ΅ ν™•μΈν•΄ λ³Έλ‹¤. IPλ¥Ό μ¬λ°”λ¥΄κ² ν• λ‹Ήλ°›μ§€ λ»ν•μ€μΌλ©΄, μ•„λμ™€ κ°™μ΄ ν•΄μ„ μƒλ΅ λ°›μ•„λ³Έλ‹¤.
     ```shell
     $ sudo ip addr flush dev eth0
     $ sudo dhclient eth0
     ```
     κ²°κ³Όλ΅ eth0 μ΄λ”λ„· μ¥μΉκ°€ IPλ¥Ό 192.168.0.XXXκ³Ό κ°™μ€ μ£Όμ†λ΅ ν• λ‹Ήλ°›λ”λ‹¤.
  1. μ΄ν›„ μ•„λμ™€ κ°™μ΄ NFS μ„λ²„λ¥Ό μ‹¤ν–‰μ‹ν‚¨λ‹¤.
     ```shell
     $ sudo service rpcbind start
     $ sudo /etc/init.d/nfs-kernel-server start
     ```
  1. μ΄μ  NFS ν΄λΌμ΄μ–ΈνΈ μ¥μΉμ—μ„ eth0 IP μ£Όμ†λ΅ NFS λ§μ΄νΈν•΄ λ³Έλ‹¤. λ§μ•½ λ§μ΄νΈκ°€ μ μ•λλ©΄ (μ: "Connection refused" μ—λ¬), Linuxμ `/etc/hosts` νμΌμ—μ„ ν•„μ”μ—†λ” λ¶€λ¶„μ„ μ κ±°ν•΄ λ³Έλ‹¤.

## GUI app μ§€μ›
2021λ…„ 4μ›”μ— λ“λ””μ–΄ Windows 10 Insiders preview λΉλ“ 21364μ— **WSLg** μ΄λ¦„μΌλ΅ ν¬ν•¨λμ—λ‹¤. μμ„Έν• λ‚΄μ©μ€ [GitHub WSLg](https://github.com/microsoft/wslg)λ¥Ό μ°Έμ΅°ν•μ.  
2021λ…„ 10μ›” 5μΌμ— λ°ν‘λ Windows 11μ—λ” **WSLg**κ°€ κΈ°λ³ΈμΌλ΅ ν¬ν•¨λμ–΄ μλ‹¤. μ‹¤μ λ΅ ν•΄ λ³΄λ‹, μ†λ„λ„ μ•„μ£Ό λΉ λ¥΄κ² λ°”λ΅ GUI appμ΄ μ‹¤ν–‰λλ‹¤. π¥‚

> μ°Έκ³ λ΅ Windows10μΈ κ²½μ°μ—λ” WSL2λ¥Ό μ„¤μΉν•λ”λΌλ„ WSLgλ¥Ό μ„¤μΉν•  μλ” μ—†λ”λ°, λ”°λΌμ„ ν„μ¬λ΅μ¨λ” Windows10μΈ κ²½μ°μ—λ” (Windows11μ WSLgλ³΄λ‹¤λ” λ³µμ΅ν•μ§€λ§) [GWSL](https://apps.microsoft.com/store/detail/gwsl/9NL6KD1H33V3?hl=ko-kr&gl=KR)μ„ μ΄μ©ν•λ” κ²ƒμ΄ κ°€μ¥ κ°„λ‹¨ν GUI appμ„ μ‹¤ν–‰ν•λ” λ°©λ²•μΈ κ²ƒ κ°™λ‹¤.

> π†— Windows10μ—μ„λ„ λ“λ””μ–΄ 22H2 λ²„μ „λ¶€ν„°λ” WSLgλ¥Ό μ§€μ›ν•κ² λμ—λ‹¤. π  
> Windows10 μ‚¬μ©μλ” μ•„λμ™€ κ°™μ΄ WSLμ„ μ—…λ°μ΄νΈμ‹ν‚¤λ©΄ λλ‹¤.
> ```sh
> C:\>wsl --update
> ```
> μ΄ν›„ μ•„λμ™€ κ°™μ΄ WSL λ²„μ „μ„ ν™•μΈν•΄ λ³΄λ©΄ `WSLg λ²„μ „` ν•­λ©μ„ ν™•μΈν•  μ μλ‹¤.
> ```sh
> C:\>wsl --version
> ...
> WSLg λ²„μ „: 1.0.47
> ...
> ```
